
# Лабораторная работа. Просмотр таблицы MAC-адресов коммутатора 
**Цели** 

**Часть 1. Создание и настройка сети** 

**Часть 2. Изучение таблицы МАС-адресов коммутатора**

###  Решение:

**1. Часть 1. Создание и настройка сети;**
  
 ##### 1.1. Подключите сеть в соответствии с топологией.

 ![](./jpg/2-1.PNG)

|    Устройство    |   Интерфейс    |   IP-адрес / префикс     |Маска подсети       |
|-----------------:|:---------------|-------------------------:|-------------------:|
|     S1           |     VLAN 1     |   192.168.1.11           | 255.255.255.0      | 
|     S2           |     VLAN 1     |   192.168.1.12           | 255.255.255.0      |
|     PC-A         |     NIC        |   192.168.1.1            | 255.255.255.0      | 
|     PC-B         |     NIC        |   192.168.1.2            | 255.255.255.0      |
 
 ##### 1.2. Настройте узлы ПК.
 ![](./jpg/2-2.PNG)
 
 Второй ПК настраивается аналогично.
 
 ##### 1.3. Выполните инициализацию и перезагрузку коммутаторов.
  ![](./jpg/2-3.PNG)
  
 Второй коммутатор перезагружается аналогично.
 
 ##### 1.4. Настройте базовые параметры каждого коммутатора.
 
 ##### Откройте окно конфигурации:
  ##### a.	Настройте имена устройств в соответствии с топологией.
  ##### b.	Настройте IP-адреса, как указано в таблице адресации.
  ##### c.	Назначьте cisco в качестве паролей консоли и VTY.
  ##### d.	Назначьте class в качестве пароля доступа к привилегированному режиму EXEC.
  ##### Ниже в конфигурации даны пояснения для подпунктов задания 1.4 (a, b, c, d)
  ```
S1#sh run
Building configuration...

Current configuration : 1217 bytes
!
version 15.0
no service timestamps log datetime msec
no service timestamps debug datetime msec
service password-encryption
!
hostname S1 # Настройка имени устройства в соответствии с топологией. Для второго коммутатора S2 соответственно.
!
enable secret 5 $1$mERr$9cTjUIEqNGurQiFU.ZeCi1 # Назначение class в качестве пароля доступа к привилегированному режиму EXEC.
!
!
!
!
!
!
spanning-tree mode pvst
spanning-tree extend system-id
!
interface FastEthernet0/1
!
interface FastEthernet0/2
!
interface FastEthernet0/3
!
interface FastEthernet0/4
!
interface FastEthernet0/5
!
interface FastEthernet0/6
!
interface FastEthernet0/7
!
interface FastEthernet0/8
!
interface FastEthernet0/9
!
interface FastEthernet0/10
!
interface FastEthernet0/11
!
interface FastEthernet0/12
!
interface FastEthernet0/13
!
interface FastEthernet0/14
!
interface FastEthernet0/15
!
interface FastEthernet0/16
!
interface FastEthernet0/17
!
interface FastEthernet0/18
!
interface FastEthernet0/19
!
interface FastEthernet0/20
!
interface FastEthernet0/21
!
interface FastEthernet0/22
!
interface FastEthernet0/23
!
interface FastEthernet0/24
!
interface GigabitEthernet0/1
!
interface GigabitEthernet0/2
!
interface Vlan1
 ip address 192.168.1.11 255.255.255.0  # Настройка IP-адреса, как указано в таблице адресации. Для второго коммутатора 192.168.1.12, сооветственно.
!
!
!
!
line con 0 # Назначение cisco в качестве паролей консоли.
 password 7 0822455D0A16
 login
!
line vty 0 4 # Назначение cisco в качестве пароля VTY.
 password 7 0822455D0A16
 login
 transport input telnet
line vty 5 15
 login
!
!
!
!
end
  ```

  
**2. Часть 2. Часть 2. Изучение таблицы МАС-адресов коммутатора;**
##### Как только между сетевыми устройствами начинается передача данных, коммутатор выясняет МАС-адреса и строит таблицу

##### 2.1 Запишите МАС-адреса сетевых устройств.;
 ##### a.	Откройте командную строку на PC-A и PC-B и введите команду ipconfig /all.
 ipconfig /all для PC-A: 
 
![](./jpg/2-4.PNG) 

 ipconfig /all для PC-B:
 
![](./jpg/2-5.PNG) 
 
 
 ##### Назовите физические адреса адаптера Ethernet.
 ##### MAC-адрес компьютера PC-A: 0060.5CA0.477D
 ##### MAC-адрес компьютера PC-B: 000C.851E.8D41
 ##### b.	Подключитесь к коммутаторам S1 и S2 через консоль и введите команду show interface F0/1 на каждом коммутаторе.

 S1:
 
 ![](./jpg/2-6.PNG)

 S2:
 
 ![](./jpg/2-7.PNG)
 
 ##### Откройте окно конфигурации
 ##### Вопросы:
 ##### Назовите адреса оборудования во второй строке выходных данных команды (или зашитый адрес — bia).
 ##### МАС-адрес коммутатора S1 Fast Ethernet 0/1: bia 0030.f253.7601
 ##### МАС-адрес коммутатора S2 Fast Ethernet 0/1: bia 0030.f2dc.2c01
 
##### 2.2 Просмотрите таблицу МАС-адресов коммутатора.;
 ##### Подключитесь к коммутатору S2 через консоль и просмотрите таблицу МАС-адресов до и после тестирования сетевой связи с помощью эхо-запросов.
 
 До эхо-запроса:
 
 ![](./jpg/2-8.PNG)

 После эхо-запроса:
 
 ![](./jpg/2-9.PNG)
 
 
 ##### a.	Подключитесь к коммутатору S2 через консоль и войдите в привилегированный режим EXEC.Откройте окно конфигурации
 ##### b.	В привилегированном режиме EXEC введите команду show mac address-table и нажмите клавишу ввода.

```
S2# show mac address-table
```
![](./jpg/2-9.PNG)

 ##### Даже если сетевая коммуникация в сети не происходила (т. е. если команда ping не отправлялась), коммутатор может узнать МАС-адреса при подключении к ПК и другим коммутаторам.
 ##### Вопросы:
 ##### Записаны ли в таблице МАС-адресов какие-либо МАС-адреса? - Да. Указан MAC, который подклчен к порту.
 ##### Какие МАС-адреса записаны в таблице? - MAC порта подключенного коммутатора. С какими портами коммутатора они сопоставлены и каким устройствам принадлежат? - MAC принадлежит порту подключенного коммутатора. 
 ##### Если вы не записали МАС-адреса сетевых устройств в шаге 1, как можно определить, каким устройствам принадлежат МАС-адреса, используя только выходные данные команды show mac address-table? Работает ли это решение в любой ситуации? - Комманда "show mac address-table" покажет МАС устройства 2 уровня, подключенное непосредственно к порту.

##### 2.3 Очистите таблицу МАС-адресов коммутатора S2 и снова отобразите таблицу МАС-адресов.
 ##### a.	В привилегированном режиме EXEC введите команду clear mac address-table dynamic и нажмите клавишу Enter.
 ```
S2# clear mac address-table dynamic
 ```
 ##### b.	Снова быстро введите команду show mac address-table.

 ![](./jpg/2-10.PNG)
 
 ##### Вопросы:
 ##### Указаны ли в таблице МАС-адресов адреса для VLAN 1? - Да. Указаны ли другие МАС-адреса? - нет.
 ##### Через 10 секунд введите команду show mac address-table и нажмите клавишу ввода. Появились ли в таблице МАС-адресов новые адреса? - Да. указан MAC порта подключенного коммутатора.
 
##### 2.4 Шаг 4. С компьютера PC-B отправьте эхо-запросы устройствам в сети и просмотрите таблицу МАС-адресов коммутатора.
##### a.	На компьютере PC-B откройте командную строку и еще раз введите команду arp -a.
##### Откройте командную строку.
##### Вопрос:
##### Не считая адресов многоадресной и широковещательной рассылки, сколько пар IP- и МАС-адресов устройств было получено через протокол ARP?
##### b.	Из командной строки PC-B отправьте эхо-запросы на компьютер PC-A, а также коммутаторы S1 и S2.
##### Вопрос:
##### От всех ли устройств получены ответы? Если нет, проверьте кабели и IP-конфигурации.
##### Закройте командную строку.
##### c.	Подключившись через консоль к коммутатору S2, введите команду show mac address-table.
##### Откройте окно конфигурации
##### Вопрос:
##### Добавил ли коммутатор в таблицу МАС-адресов дополнительные МАС-адреса? Если да, то какие адреса и устройства?
##### На компьютере PC-B откройте командную строку и еще раз введите команду arp -a.
##### Вопрос:
##### Появились ли в ARP-кэше компьютера PC-B дополнительные записи для всех сетевых устройств, которым были отправлены эхо-запросы?

#### Вопрос для повторения
#### В сетях Ethernet данные передаются на устройства по соответствующим МАС-адресам. Для этого коммутаторы и компьютеры динамически создают ARP-кэш и таблицы МАС-адресов. Если компьютеров в сети немного, эта процедура выглядит достаточно простой. Какие сложности могут возникнуть в крупных сетях



  

 
